"use strict";(self.webpackChunkcracknuts_website=self.webpackChunkcracknuts_website||[]).push([[8054],{4759:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"doc/development/communication-protocol","title":"\u901a\u4fe1\u534f\u8bae","description":"The communication between the host computer and the acquisition board is carried out through the CNP protocol, enabling configuration and data acquisition operations between the acquisition board and the host computer.","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/doc/development/communication-protocol.md","sourceDirName":"doc/development","slug":"/doc/development/communication-protocol","permalink":"/docs/doc/development/communication-protocol","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_label":"\u901a\u4fe1\u534f\u8bae","sidebar_position":9},"sidebar":"docSidebar","previous":{"title":"\u4e0a\u4f4d\u673a\u8f6f\u4ef6\u5f00\u6e90\u8d21\u732e","permalink":"/docs/doc/development/host-software-contribute"},"next":{"title":"\u5f00\u6e90","permalink":"/docs/doc/development/opensource"}}');var r=i(4848),d=i(8453);const t={sidebar_label:"\u901a\u4fe1\u534f\u8bae",sidebar_position:9},c="\u901a\u4fe1\u534f\u8bae",l={},o=[{value:"Protocol Frame Structure",id:"protocol-frame-structure",level:2},{value:"Abstract and Supporting List",id:"abstract-and-supporting-list",level:2},{value:"Detail",id:"detail",level:2},{value:"GET_ID",id:"get_id",level:3},{value:"GET_NAME",id:"get_name",level:3},{value:"GET_VERSION",id:"get_version",level:3},{value:"SCRAT_ANALOG_CHANNEL_ENABLE",id:"scrat_analog_channel_enable",level:3},{value:"SCRAT_ANALOG_COUPLING",id:"scrat_analog_coupling",level:3},{value:"SCRAT_ANALOG_VOLTAGE",id:"scrat_analog_voltage",level:3}];function a(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"\u901a\u4fe1\u534f\u8bae",children:"\u901a\u4fe1\u534f\u8bae"})}),"\n",(0,r.jsx)(n.p,{children:"The communication between the host computer and the acquisition board is carried out through the CNP protocol, enabling configuration and data acquisition operations between the acquisition board and the host computer."}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"CNP"})," protocol is a TCP-based communication protocol used between the ",(0,r.jsx)(n.code,{children:"cracker"})," device and the host computer."]}),"\n",(0,r.jsx)(n.h2,{id:"protocol-frame-structure",children:"Protocol Frame Structure"}),"\n",(0,r.jsxs)(n.p,{children:["The protocol frame contains two parts: a message header and a message body. The length ",(0,r.jsx)(n.code,{children:"field"})," in the ",(0,r.jsx)(n.code,{children:"header"})," specifies the data length of the ",(0,r.jsx)(n.code,{children:"body"}),". Below is the specific format description for the request and response."]}),"\n",(0,r.jsx)(n.p,{children:"Request"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502--------------Request Header---------------\u2502-------\u2502\r\n\u2502Magic \u2502Version\u2502Direction\u2502Command\u2502RFU\u2502Length\u2502PayLoad\u2502\r\n\u2502-------------------------------------------\u2502-------\u2502\r\n\u2502 4B   \u2502  2B   \u2502   1B    \u2502   2B  \u25022B \u2502  4B  \u2502$Length\u2502\r\n\u2502-------------------------------------------\u2502-------\u2502\r\n\u2502'CRAK'\u2502   1   \u2502   'S'   \u2502       \u2502   \u2502      \u2502       \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.p,{children:"Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n\u2502--------------Response Header---------\u2502-------\u2502\r\n\u2502Magic \u2502Version\u2502Direction\u2502Status\u2502Length\u2502PayLoad\u2502\r\n\u2502--------------------------------------\u2502-------\u2502\r\n\u2502 4B   \u2502  2B   \u2502   1B    \u2502  2B  \u2502  4B  \u2502$Length\u2502\r\n\u2502--------------------------------------\u2502-------\u2502\r\n\u2502'CRAK'\u2502   1   \u2502   'R'   \u2502      \u2502      \u2502       \u2502\r\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h2,{id:"abstract-and-supporting-list",children:"Abstract and Supporting List"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Categroy"}),(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Command(hex)"}),(0,r.jsx)(n.th,{children:"Python SDK"}),(0,r.jsx)(n.th,{children:"Jupyter widget"}),(0,r.jsx)(n.th,{children:"Device S1"}),(0,r.jsx)(n.th,{children:"Device Simulation"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Device info"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#get_id",children:"GET_ID"})}),(0,r.jsx)(n.td,{children:"0x0001"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Device info"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#get_name",children:"GET_NAME"})}),(0,r.jsx)(n.td,{children:"0x0002"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Device info"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#get_version",children:"GET_VERSION"})}),(0,r.jsx)(n.td,{children:"0x0003"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"}),(0,r.jsx)(n.td,{children:"No"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Scrat"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.a,{href:"#scrat_analog_channel_enable",children:"SCRAT_ANALOG_CHANNEL_ENABLE"})}),(0,r.jsx)(n.td,{children:"0x0100"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"Yes"}),(0,r.jsx)(n.td,{children:"No"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"detail",children:"Detail"}),"\n",(0,r.jsx)(n.h3,{id:"get_id",children:"GET_ID"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Category: device info"}),"\n",(0,r.jsx)(n.li,{children:"Description: Get device id"}),"\n",(0,r.jsxs)(n.li,{children:["Command: ",(0,r.jsx)(n.code,{children:"0x0001"})]}),"\n",(0,r.jsxs)(n.li,{children:["Req payload",(0,r.jsx)(n.br,{}),"\n","Nil"]}),"\n",(0,r.jsxs)(n.li,{children:["Res payload",(0,r.jsx)(n.br,{}),"\n","Device info bit"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"get_name",children:"GET_NAME"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Category: device info"}),"\n",(0,r.jsx)(n.li,{children:"Description: Get device name"}),"\n",(0,r.jsxs)(n.li,{children:["Command: ",(0,r.jsx)(n.code,{children:"0x0002"})]}),"\n",(0,r.jsxs)(n.li,{children:["Req payload",(0,r.jsx)(n.br,{}),"\n","Nil"]}),"\n",(0,r.jsxs)(n.li,{children:["Res payload",(0,r.jsx)(n.br,{}),"\n","Device name"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"get_version",children:"GET_VERSION"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Category: device info"}),"\n",(0,r.jsx)(n.li,{children:"Description: Get device version"}),"\n",(0,r.jsxs)(n.li,{children:["Command: ",(0,r.jsx)(n.code,{children:"0x0002"})]}),"\n",(0,r.jsxs)(n.li,{children:["Req payload",(0,r.jsx)(n.br,{}),"\n","Nil"]}),"\n",(0,r.jsxs)(n.li,{children:["Res payload",(0,r.jsx)(n.br,{}),"\n","Device version"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scrat_analog_channel_enable",children:"SCRAT_ANALOG_CHANNEL_ENABLE"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Category: scart"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Description: Set scrat channel enable status."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Command: ",(0,r.jsx)(n.code,{children:"0x0100"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Req payload"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["length: ",(0,r.jsx)(n.code,{children:"1 byte"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Each bit identifies a channel, for example, bit 0 identifies the first channel, bit 1 identifies the second channel, and so on. The value of ",(0,r.jsx)(n.code,{children:"1"})," represents enable, and the value of ",(0,r.jsx)(n.code,{children:"0"})," represents disable.",(0,r.jsx)(n.br,{}),"\n","For example, enable channel 1 the byte is ",(0,r.jsx)(n.code,{children:"0x0001"}),", and in binary is ",(0,r.jsx)(n.code,{children:"0b00000001"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Res payload",(0,r.jsx)(n.br,{}),"\n","Nil"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scrat_analog_coupling",children:"SCRAT_ANALOG_COUPLING"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Category: scart"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Description: Set scrat channel coupling status."}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Command: ",(0,r.jsx)(n.code,{children:"0x0101"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Req payload"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["length: ",(0,r.jsx)(n.code,{children:"1 byte"})]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Each bit identifies a channel, for example, bit 0 identifies the first channel, bit 1 identifies the second channel, and so on. The value of ",(0,r.jsx)(n.code,{children:"1"})," represents dc, and the value of ",(0,r.jsx)(n.code,{children:"0"})," represents ac.",(0,r.jsx)(n.br,{}),"\n","For example, set channel 1 to dc the byte is ",(0,r.jsx)(n.code,{children:"0x0001"}),", and in binary is ",(0,r.jsx)(n.code,{children:"0b00000001"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Res payload",(0,r.jsx)(n.br,{}),"\n","Nil"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"scrat_analog_voltage",children:"SCRAT_ANALOG_VOLTAGE"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Category: scart"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Description: Set scrat channel analog voltage"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Command: ",(0,r.jsx)(n.code,{children:"0x0102"})]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Req payload"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["length: ",(0,r.jsx)(n.code,{children:"5 byte"}),"\r\nThe first byte is an unsigned byte that identifies the channel number, and the last four bytes are an unsigned int."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"+----------+--------------+\r\n| Channel  | Voltage      |\r\n| (Byte 1) | (Byte 2 - 5) |\r\n+----------+--------------+\n"})}),"\n",(0,r.jsxs)(n.p,{children:["For example, set channel 1 to dc the byte is ",(0,r.jsx)(n.code,{children:"0x0001"}),", and in binary is ",(0,r.jsx)(n.code,{children:"0b00000001"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Res payload",(0,r.jsx)(n.br,{}),"\n","Nil"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.em,{children:"Pending completion"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>c});var s=i(6540);const r={},d=s.createContext(r);function t(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);